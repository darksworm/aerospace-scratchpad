## Funzzy events file
# more details see: https://github.com/cristianoliveira/funzzy
#
# List here the tasks and the commands for this workflow
# then run `fzz` to start to work.

- name: quick checks
  run: 
    - gotestsum --format pkgname
  run_on_init: true
  change: 
    - '**/*.go'
    - '**/*.snap'
    - '.golangci.yml'
  ignore: 
    - '.tmp/**/*'
    - '**/*.log'

- name: install after checks
  run: 
    # Validate if file .install contains 1 otherwise 
    - if [ -f .tmp/install ]; then go install . && echo "installed latest" ; fi
    - aerospace-scratchpad -v
  change: 
    - '**/*.go'
    - '**/*.snap'
  ignore: 
    - '.tmp/**/*'
    - '**/*.log'

- name: quick checks style
  run: 
    - go fmt ./...
    - make fmt
  run_on_init: true
  change: 
    - '**/*.go'
    - '**/*.snap'
    - '.golangci.yml'
  ignore: 
    - '.tmp/**/*'
    - '**/*.log'

- name: git stage changes
  run: git add {{relative_path}}
  change: 
    - '**/*.go'
    - '**/*.snap'
  ignore: 
    - '.tmp/**/*'
    - '**/*.log'
